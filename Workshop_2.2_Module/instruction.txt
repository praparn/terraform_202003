This workshop for operate with module on azure
========================================  Module Operate  ===============================================================
1. Start workshop "module variable" by command:
    cd ~/terraform_202003/Workshop_2.2_Module/01_Module/
    sed -i -e 's/X/<your lab id>/g' ~/terraform_202003/Workshop_2.2_Module/01_Module/terraform.tfvars
    more 00_provider.tf
    more 01_resource_group.tf
    more 02_network_module.tf
    more 03_compute_module.tf
    more terraform.tfvars
    more terraformlab.pub
    more variables.tf

2. Login az cli for service priciple by command:
    2.1 Input command: "terraform login"
    ---------------------------------------------------------------------------
    Example Output:
    ---------------------------------------------------------------------------
    To sign in, use a web browser to open the page https://microsoft.com/devicelogin and enter the code HUAF6ANNY to authenticate.
    ---------------------------------------------------------------------------

    2.2 Open browser for url: "https://microsoft.com/devicelogin" and input code

    2.3 Sign In with user below:
    Email: Training_Terraform_Student@eva10409hotmail.onmicrosoft.com
    Username: Training_Terraform_Student
    Password: Tr@1n1nG2020

    2.4 You will get information from login as example below:
    ---------------------------------------------------------------------------
    Example Output:
    ---------------------------------------------------------------------------
[
  {
    "cloudName": "AzureCloud",
    "id": "017499d3-a685-4954-b727-273a4a7f939f",
    "isDefault": true,
    "name": "Azure subscription 1",
    "state": "Enabled",
    "tenantId": "94740460-e015-46f0-b75b-1948465bf6a1",
    "user": {
      "name": "Training_Terraform_Student@eva10409hotmail.onmicrosoft.com",
      "type": "user"
    }
  }
]

3. Start process of terraform operation:
    terraform init
    terraform fmt -check
    terraform validate
    terraform apply -auto-approve -parallelism=5 

4. Check output detail of virtual machine instance by command: terraform output  (* Record instance id, ip address etc)
---------------------------------------------------------------------------
    Example:
    Outputs:
aws_instance_lab_id = i-0eeb2339131d2f6ce
aws_instance_lab_keyname = keypair
aws_instance_lab_public_dns = ec2-13-251-110-185.ap-southeast-1.compute.amazonaws.com
aws_instance_lab_public_ip = 13.251.110.185

---------------------------------------------------------------------------

4. Check status of EC2 and detail by command: az vm list -g <resource group name> -d --output table
    ---------------------------------------------------------------------------
    Example Output:
    ---------------------------------------------------------------------------

Name                   ResourceGroup                PowerState    PublicIps     Fqdns                                                                   Location       Zones
---------------------  ---------------------------  ------------  ------------  ----------------------------------------------------------------------  -------------  -------
labserver-student-220  labresourcegroup-student-22  VM running    52.187.12.41  labserver20200301-thailand-student-22.southeastasia.cloudapp.azure.com  southeastasia
    ---------------------------------------------------------------------------

5. (Local Machine) Test access to new machine by ssh connection to <public ip>

    ---------------------------------------------------------------------------
    Example MAC or WSL2:
    ---------------------------------------------------------------------------
    ssh -i terraform ubuntu@<public ip>
    ---------------------------------------------------------------------------
    ---------------------------------------------------------------------------
    Example Windows:
    ---------------------------------------------------------------------------
    putty to <public ip>
    ---------------------------------------------------------------------------

6. Destroy EC2/EBS from this script by command: 
    terraform destroy -auto-approve

7. Check status of EC2 and detail by command: az vm list -g <resource group name> -d --output table